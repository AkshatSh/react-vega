!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("vega")):"function"==typeof define&&define.amd?define(["react","vega"],t):"object"==typeof exports?exports.ReactVega=t(require("react"),require("vega")):e.ReactVega=t(e.React,e.vg)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){return"onSignal"+i(e)}function s(e){var t={};return!!e&&"[object Function]"===t.toString.call(e)}function o(e){return s(e)?e():e}function p(e,t){t=o(t);var r={width:u.PropTypes.number,height:u.PropTypes.number,padding:u.PropTypes.object,viewport:u.PropTypes.array,renderer:u.PropTypes.string,data:u.PropTypes.any};return t.signals&&t.signals.forEach(function(e){r[a(e.name)]=u.PropTypes.func}),f["default"].createClass({displayName:e,propTypes:r,getInitialState:function(){return{spec:t}},render:function(){return f["default"].createElement(h,c({spec:this.state.spec,isSpecFixed:!0},this.props))}})}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.createClassFromSpec=p;var u=r(1),f=n(u),d=r(2),l=n(d),h=f["default"].createClass({displayName:"Vega",propTypes:{spec:u.PropTypes.oneOfType([u.PropTypes.object,u.PropTypes.func]),width:u.PropTypes.number,height:u.PropTypes.number,padding:u.PropTypes.object,viewport:u.PropTypes.array,renderer:u.PropTypes.string,data:u.PropTypes.any},getInitialState:function(){return{vis:null,spec:null}},componentDidMount:function(){var e=o(this.props.spec);this._initialize(e)},componentWillReceiveProps:function(e){if(!this.props.isSpecFixed){var t=o(e.spec),r=JSON.stringify(t),n=this.state.specString!==r;n&&(this._clearListeners(this.state.vis,this.state.spec),this._initialize(t)),this.setState({isNewSpec:n})}},componentDidUpdate:function(e,t){this.state.isNewSpec||this._update(this.state.vis,this.state.spec)},componentWillUnmount:function(){this._clearListeners(this.state.vis,this.state.spec)},_initialize:function(e){var t=this;l["default"].parse.spec(e,function(r){var n=r({el:t.refs.chartContainer});if(e.signals&&e.signals.forEach(function(e){n.onSignal(e.name,function(){var r=t.props[a(e.name)];if(r){for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];r.apply(t,i)}})}),t._update(n,e),t.props.isSpecFixed)t.setState({vis:n,spec:e});else{var i=JSON.stringify(e);t.setState({vis:n,spec:e,specString:i})}})},_clearListeners:function(e,t){e&&t&&t.signals&&t.signals.forEach(function(t){return e.offSignal(t.name)})},_update:function(e,t){var r=this.props;e&&t&&(e.width(r.width||t.width).height(r.height||t.height).padding(r.padding||t.padding).viewport(r.viewport||t.viewport),r.renderer&&e.renderer(r.renderer),this._updateData(e,t),e.update())},_updateData:function(e,t){var r=this.props;e&&t&&t.data&&r.data&&t.data.forEach(function(t){r.data[t.name]&&e.data(t.name).remove(function(){return!0}).insert(r.data[t.name])})},render:function(){return f["default"].createElement("div",{ref:"chartContainer"})}});t["default"]=h},function(t,r){t.exports=e},function(e,r){e.exports=t}])});